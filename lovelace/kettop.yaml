type: vertical-stack
cards:
  - type: markdown
    theme: aqua-fiesta
    content: >-
      **Benvenuto in Home Assistant**

      ---

      {% if states("sensor.current_version") == states("sensor.latest_version")
      %}  <ha-icon icon="mdi:home-assistant"></ha-icon>&nbsp; **Versione
      Installata:**  {{states('sensor.current_version')}}


      ---


      {% elif states("sensor.current_version") !=
      states("sensor.latest_version") %}

      <ha-icon  icon="mdi:home-assistant"></ha-icon>&nbsp; **Aggiornamento:**
      {{states('sensor.current_version')}} ->
      {{states('sensor.latest_version')}} 

      <ha-icon  icon="mdi:playlist-edit"></ha-icon>&nbsp;***Autore***:
      {{states.sensor.ha_fix.attributes["author"]["login"]}}  <img
      src="{{states.sensor.ha_fix.attributes["author"]["avatar_url"]}}"
      height="40" ></a>

      {{ state_attr("sensor.ha_fix", "body")|regex_replace(find='\[.*\]?.*',
      ignorecase=False) | replace ('(', '') }}


      ---


      {% endif %}

      {% if state_attr("sensor.supervisor_updates", "current_version") == 
      state_attr("sensor.supervisor_updates", "newest_version") %}

      <ha-icon  icon="mdi:home-assistant"></ha-icon>&nbsp; **Supervisor
      Installato:** 
      {{states.sensor.supervisor_updates.attributes["current_version"]}}


      ---

      {% elif state_attr("sensor.supervisor_updates", "current_version") != 
      state_attr("sensor.supervisor_updates", "newest_version") %}


      **Aggiornamento Supervisor:** {{ state_attr("sensor.supervisor_updates",
      "current_version") }} ->  {{ state_attr("sensor.supervisor_updates",
      "newest_version") }}


      ---


      {% endif %}

      {% if states("sensor.supervisor_updates") != "0" %}
        
      <ha-icon icon="mdi:format-list-bulleted"></ha-icon>&nbsp;**Aggiornamenti
      Add-on:**&nbsp;&nbsp;{{ states.sensor.supervisor_updates.state }}
        
      - {% for addon in states.sensor.supervisor_updates.attributes.addons %}
        {{ addon.name }}&nbsp; {{ addon.installed }} -> {{ addon.version }}
        {% endfor %}


      ---


      {% endif %}

      {% if states("sensor.hacs") != "0" %}

      <ha-icon icon="hacs:hacs"></ha-icon>&nbsp;  **Aggiornamenti
      HACS:**&nbsp;&nbsp; {{ states.sensor.hacs.state }}

      - {% for repo in states.sensor.hacs.attributes.repositories %}
        **{{ repo.display_name }}:** _{{ repo["installed_version"] }}_ -> _{{repo["available_version"] }}_
        {% endfor %}


        ---


      {% endif %}
    style: |
      ha-card {
        background: rgba(0, 0, 0, 0.6);
        background-position: auto; 
        background-size: cover;
        color: lime;
        border: 4px solid orange; 
        border-radius: 20px;  
        text-align: justify;
      }
